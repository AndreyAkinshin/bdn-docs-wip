<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Customizing Mono - BenchmarkDotNet Documentation</title>
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../css/theme_colors.css" type="text/css" />
    <link rel="stylesheet" href="../css/styles/vs.css">
    <link rel="stylesheet" href="../css/font-awesome.4.5.0.min.css">

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-41419012-6', 'auto');
      ga('send', 'pageview');

    </script>
    <!-- /Google Analytics -->
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter40812449 = new Ya.Metrika({
                        id:40812449,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true
                    });
                } catch(e) { }
            });

            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/watch.js";

            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/40812449" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
</head>
<body role="document">
    <div class="grid-for-nav">
        <nav data-toggle="nav-shift" class="nav-side stickynav">
            <div class="side-nav-search">
                <a href="../index.htm"><i class="fa fa-home"></i> BenchmarkDotNet Documentation</a>
                <div role="search">
                    <form id="search-form" class="form" action="../Docnet_search.htm" method="get">
                        <input type="text" name="q" placeholder="Search docs" />
                    </form>
                </div>
            </div>
            <div class="menu menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
<ul>
<li class="tocentry"><a href="../index.htm">Home</a>
</li>

<li class="tocentry"><a href="../Overview.htm">Overview</a>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../Guides.htm">Guides</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../Configs.htm">Configs</a></span>
</li>
<li class="tocentry">
<ul>
<li><span class="navigationgroup"><i class="fa fa-caret-down"></i> <a href="../Advancedfeatures.htm">Advanced features</a></span></li>
<li class="tocentry"><a href="../Advanced/Params.htm">Params</a>
</li>
<li class="tocentry"><a href="../Advanced/SetupAndCleanup.htm">Setup And Cleanup</a>
</li>
<li class="tocentry"><a href="../Advanced/Baseline.htm">Baseline</a>
</li>
<li class="tocentry"><a href="../Advanced/Percentiles.htm">Percentiles</a>
</li>
<li class="tocentry"><a href="../Advanced/STAThread.htm">STAThread</a>
</li>
<li class="tocentry current"><a class="current" href="../Advanced/CustomizingMono.htm">Customizing Mono</a>
<ul class="currentrelative">
<li class="tocentry"><a href="#custom-mono-paths">Custom Mono Path(s)</a></li>
<li class="tocentry"><a href="#mono-options">Mono Options</a></li>
<li class="tocentry"><a href="#llvm">LLVM</a></li>
</ul>
<li class="tocentry"><a href="../Advanced/EnvironmentVariables.htm">Environment Variables</a>
</li>

</ul>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../Internals.htm">Internals</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../Contributing.htm">Contributing</a></span>
</li>
<li class="tocentry"><a href="../FAQ.htm">FAQ</a>
</li>
<li class="tocentry"><a href="../Team.htm">Team</a>
</li>
<li class="tocentry"><a href="../license.htm">License</a>
</li>
</ul>
				<div class="toc-footer">
					<span class="text-small">
						<hr/>
						<a href="https://github.com/FransBouma/DocNet" target="_blank">Made with <i class="fa fa-github"></i> DocNet</a>
					</span>
				</div>	
			</div>
            &nbsp;
        </nav>
        <section data-toggle="nav-shift" class="nav-content-wrap">
            <nav class="nav-top" role="navigation" aria-label="top navigation">
                <i data-toggle="nav-top" class="fa fa-bars"></i>
                <a href="../index.htm">BenchmarkDotNet Documentation</a>
            </nav>
            <div class="nav-content">
                <div role="navigation" aria-label="breadcrumbs navigation">
                    <div class="breadcrumbs">
<ul><li><a href="../index.htm">Home</a></li> / <li><a href="../Advancedfeatures.htm">Advanced features</a></li> / <li><a href="../Advanced/CustomizingMono.htm">Customizing Mono</a></li></ul>
					
                    </div>
                    <hr />
                </div>
                <div role="main">
                    <div class="section">
<h1 id="customizing-mono">Customizing Mono<a class="headerlink" href="#customizing-mono" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h1>
<h2 id="custom-mono-paths">Custom Mono Path(s)<a class="headerlink" href="#custom-mono-paths" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>BenchmarkDotNet allows you to compare different runtimes, including Mono. If you apply <code>[MonoJob]</code> attribute to your class we use your default mono runtime. If you want to compare different versions of Mono you need to provide use the custom paths. You can do this today by using the overloaded ctor of MonoJob attribute or by specifying the runtime in a fluent way.</p>
<h3 id="sample-configuration">Sample configuration<a class="headerlink" href="#sample-configuration" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<pre><code class="cs">[ClrJob, CoreJob]
[MonoJob(&quot;Mono 4.8.0&quot;, @&quot;C:\Program Files\Mono\bin\mono.exe&quot;)]
[MonoJob(&quot;Mono 4.6.2&quot;, @&quot;C:\Program Files (x86)\Mono\bin\mono.exe&quot;)]
public class Algo_Md5VsSha256
{
   /* benchmarks removed for brevity */
}   
</code></pre>

<pre><code class="cs">private IConfig CreateConfig()
{
    return ManualConfig.CreateEmpty()
        .With(Job.ShortRun.With(new MonoRuntime(&quot;Mono 4.8.0&quot;, @&quot;C:\Program Files\Mono\bin\mono.exe&quot;))
        .With(Job.ShortRun.With(new MonoRuntime(&quot;Mono 4.6.2&quot;, @&quot;C:\Program Files (x86)\Mono\bin\mono.exe&quot;));
}
</code></pre>

<h3 id="sample-results">Sample results:<a class="headerlink" href="#sample-results" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<pre class="nocode">// ***** BenchmarkRunner: Start   *****
// Found benchmarks:
//   Algo_Md5VsSha256.Md5: Clr(Runtime=Clr)
//   Algo_Md5VsSha256.Sha256: Clr(Runtime=Clr)
//   Algo_Md5VsSha256.Md5: Core(Runtime=Core)
//   Algo_Md5VsSha256.Sha256: Core(Runtime=Core)
//   Algo_Md5VsSha256.Md5: Mono 4.6.2(Runtime=Mono 4.6.2)
//   Algo_Md5VsSha256.Sha256: Mono 4.6.2(Runtime=Mono 4.6.2)
//   Algo_Md5VsSha256.Md5: Mono 4.8.0(Runtime=Mono 4.8.0)
//   Algo_Md5VsSha256.Sha256: Mono 4.8.0(Runtime=Mono 4.8.0)
</pre><pre><code class="ini">BenchmarkDotNet=v0.10.2.0-develop, OS=Microsoft Windows 10.0.14393
Processor=Intel(R) Core(TM) i7-6600U CPU 2.60GHz, ProcessorCount=4
Frequency=2742190 Hz, Resolution=364.6720 ns, Timer=TSC
dotnet cli version=1.0.0-rc4-004771
  [Host]     : .NET Core 4.6.24628.01, 64bit RyuJIT
  Clr        : Clr 4.0.30319.42000, 64bit RyuJIT-v4.6.1586.0
  Core       : .NET Core 4.6.24628.01, 64bit RyuJIT
  Mono 4.6.2 : Mono 4.6.2 (Visual Studio built mono), 32bit 
  Mono 4.8.0 : Mono 4.8.0 (Visual Studio built mono), 64bit 
</code></pre>

<table class="table table-bordered-all table-responsive">
<thead>
<tr>
	<th>Method</th>
	<th>Job</th>
	<th>Runtime</th>
	<th>Mean</th>
	<th>StdDev</th>
	<th>Median</th>
	<th>Scaled</th>
	<th>Scaled-StdDev</th>
	<th>Allocated</th>
</tr>
</thead>
<tbody>
<tr>
	<td>Md5</td>
	<td>Clr</td>
	<td>Clr</td>
	<td>23.2459 us</td>
	<td>0.9337 us</td>
	<td>23.3425 us</td>
	<td>1.00</td>
	<td>0.00</td>
	<td>112 B</td>
</tr>
<tr>
	<td>Sha256</td>
	<td>Clr</td>
	<td>Clr</td>
	<td>111.8421 us</td>
	<td>2.4760 us</td>
	<td>110.6653 us</td>
	<td>4.82</td>
	<td>0.21</td>
	<td>188 B</td>
</tr>
<tr>
	<td>Md5</td>
	<td>Core</td>
	<td>Core</td>
	<td>21.4333 us</td>
	<td>0.5074 us</td>
	<td>21.1727 us</td>
	<td>1.00</td>
	<td>0.00</td>
	<td>80 B</td>
</tr>
<tr>
	<td>Sha256</td>
	<td>Core</td>
	<td>Core</td>
	<td>50.1553 us</td>
	<td>1.2729 us</td>
	<td>49.7332 us</td>
	<td>2.34</td>
	<td>0.08</td>
	<td>114 B</td>
</tr>
<tr>
	<td>Md5</td>
	<td>Mono 4.6.2</td>
	<td>Mono 4.6.2</td>
	<td>45.1584 us</td>
	<td>1.0023 us</td>
	<td>45.5757 us</td>
	<td>1.00</td>
	<td>0.00</td>
	<td>N/A</td>
</tr>
<tr>
	<td>Sha256</td>
	<td>Mono 4.6.2</td>
	<td>Mono 4.6.2</td>
	<td>168.4400 us</td>
	<td>3.7425 us</td>
	<td>170.4372 us</td>
	<td>3.73</td>
	<td>0.11</td>
	<td>N/A</td>
</tr>
<tr>
	<td>Md5</td>
	<td>Mono 4.8.0</td>
	<td>Mono 4.8.0</td>
	<td>40.4432 us</td>
	<td>0.9094 us</td>
	<td>40.2218 us</td>
	<td>1.00</td>
	<td>0.00</td>
	<td>N/A</td>
</tr>
<tr>
	<td>Sha256</td>
	<td>Mono 4.8.0</td>
	<td>Mono 4.8.0</td>
	<td>155.5073 us</td>
	<td>12.9351 us</td>
	<td>151.4520 us</td>
	<td>3.85</td>
	<td>0.33</td>
	<td>N/A</td>
</tr>
</tbody>
</table>
<h2 id="mono-options">Mono Options<a class="headerlink" href="#mono-options" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>Mono supports many custom options: <code>mono [options] program [program-options]</code> And so does the BenchmarkDotNet. You can configure the options by using <code>MonoArgument</code>.</p>
<h3 id="sample-configuration-1">Sample configuration<a class="headerlink" href="#sample-configuration-1" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<pre><code class="cs">[Config(typeof(ConfigWithCustomArguments))]
public class IntroCustomMonoArguments
{
    public class ConfigWithCustomArguments : ManualConfig
    {
        public ConfigWithCustomArguments()
        {
            // --optimize=MODE , -O=mode
            // MODE is a comma separated list of optimizations. They also allow
            // optimizations to be turned off by prefixing the optimization name with a minus sign.

            Add(Job.Mono.With(new[] { new MonoArgument(&quot;--optimize=inline&quot;) }).WithId(&quot;Inlining enabled&quot;));
            Add(Job.Mono.With(new[] { new MonoArgument(&quot;--optimize=-inline&quot;) }).WithId(&quot;Inlining disabled&quot;));
        }
    }

    [Benchmark]
    public void Sample()
    {
        ShouldGetInlined(); ShouldGetInlined(); ShouldGetInlined();
        ShouldGetInlined(); ShouldGetInlined(); ShouldGetInlined();
        ShouldGetInlined(); ShouldGetInlined(); ShouldGetInlined();
    }

    void ShouldGetInlined() { }
}
</code></pre>

<h3 id="sample-results-1">Sample results<a class="headerlink" href="#sample-results-1" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<pre><code class="ini">BenchmarkDotNet=v0.10.9.20170903-develop, OS=Windows 10 Redstone 1 (10.0.14393)
Processor=Intel Core i7-6600U CPU 2.60GHz (Skylake), ProcessorCount=4
Frequency=2742190 Hz, Resolution=364.6720 ns, Timer=TSC
  [Host]            : .NET Framework 4.7 (CLR 4.0.30319.42000), 64bit RyuJIT-v4.7.2101.1
  Inlining disabled : Mono 5.0.1 (Visual Studio), 32bit 
  Inlining enabled  : Mono 5.0.1 (Visual Studio), 32bit 

Runtime=Mono  
</code></pre>

<table class="table table-bordered-all table-responsive">
<thead>
<tr>
	<th>Method</th>
	<th>Job</th>
	<th>Arguments</th>
	<th align="right">Mean</th>
	<th align="right">Error</th>
	<th align="right">StdDev</th>
</tr>
</thead>
<tbody>
<tr>
	<td>Sample</td>
	<td>Inlining disabled</td>
	<td>--optimize=-inline</td>
	<td align="right">19.4252 ns</td>
	<td align="right">0.4406 ns</td>
	<td align="right">0.4525 ns</td>
</tr>
<tr>
	<td>Sample</td>
	<td>Inlining enabled</td>
	<td>--optimize=inline</td>
	<td align="right">0.0000 ns</td>
	<td align="right">0.0000 ns</td>
	<td align="right">0.0000 ns</td>
</tr>
</tbody>
</table>
<h2 id="llvm">LLVM<a class="headerlink" href="#llvm" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>To control the <code>--llvm</code> and <code>--no-llvm</code> options you need to configure Jit property. By default, LLVM is disabled (<code>--no-llvm</code>). To enable LLVM (<code>--llvm</code>) you just call <code>Job.Default.With(Jit.Llvm)</code></p>

                    </div>
                </div>
                <footer>
                    <hr />
                    <div role="contentinfo">
BenchmarkDotNet Documentation. &copy;2013-2018. <a href='https://github.com/dotnet/BenchmarkDotNet' target='_blank'>GitHub</a> | <a href='https://www.nuget.org/packages/BenchmarkDotNet/' target='_blank'>NuGet</a>.
                    </div>
                </footer>
            </div>
        </section>
    </div>
    <script src="../js/jquery-2.1.1.min.js"></script>
    <script src="../js/modernizr-2.8.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script src="../js/theme.js"></script>

</body>
</html>
