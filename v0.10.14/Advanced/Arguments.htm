<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Arguments - BenchmarkDotNet Documentation</title>
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../css/theme_colors.css" type="text/css" />
    <link rel="stylesheet" href="../css/styles/vs.css">
    <link rel="stylesheet" href="../css/font-awesome.4.5.0.min.css">

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-41419012-6', 'auto');
      ga('send', 'pageview');

    </script>
    <!-- /Google Analytics -->
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter40812449 = new Ya.Metrika({
                        id:40812449,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true
                    });
                } catch(e) { }
            });

            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/watch.js";

            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/40812449" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
</head>
<body role="document">
    <div class="grid-for-nav">
        <nav data-toggle="nav-shift" class="nav-side stickynav">
            <div class="side-nav-search">
                <a href="../index.htm"><i class="fa fa-home"></i> BenchmarkDotNet Documentation</a>
                <div role="search">
                    <form id="search-form" class="form" action="../Docnet_search.htm" method="get">
                        <input type="text" name="q" placeholder="Search docs" />
                    </form>
                </div>
            </div>
            <div class="menu menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
<ul>
<li class="tocentry"><a href="../index.htm">Home</a>
</li>

<li class="tocentry"><a href="../Overview.htm">Overview</a>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../Guides.htm">Guides</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../Configs.htm">Configs</a></span>
</li>
<li class="tocentry">
<ul>
<li><span class="navigationgroup"><i class="fa fa-caret-down"></i> <a href="../Advancedfeatures.htm">Advanced features</a></span></li>
<li class="tocentry current"><a class="current" href="../Advanced/Arguments.htm">Arguments</a>
<ul class="currentrelative">
<li class="tocentry"><a href="#arguments-1">[Arguments]</a></li>
<li class="tocentry"><a href="#argumentssource">[ArgumentsSource]</a></li>
<li class="tocentry"><a href="#allocation-cost">Allocation cost</a></li>
</ul>
<li class="tocentry"><a href="../Advanced/Params.htm">Params</a>
</li>
<li class="tocentry"><a href="../Advanced/SetupAndCleanup.htm">Setup And Cleanup</a>
</li>
<li class="tocentry"><a href="../Advanced/Baseline.htm">Baseline</a>
</li>
<li class="tocentry"><a href="../Advanced/Percentiles.htm">Percentiles</a>
</li>
<li class="tocentry"><a href="../Advanced/STAThread.htm">STAThread</a>
</li>
<li class="tocentry"><a href="../Advanced/CustomizingMono.htm">Customizing Mono</a>
</li>
<li class="tocentry"><a href="../Advanced/EnvironmentVariables.htm">Environment Variables</a>
</li>

</ul>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../Internals.htm">Internals</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../Contributing.htm">Contributing</a></span>
</li>
<li class="tocentry"><a href="../FAQ.htm">FAQ</a>
</li>
<li class="tocentry"><a href="../Team.htm">Team</a>
</li>
<li class="tocentry"><a href="../license.htm">License</a>
</li>
</ul>
				<div class="toc-footer">
					<span class="text-small">
						<hr/>
						<a href="https://github.com/FransBouma/DocNet" target="_blank">Made with <i class="fa fa-github"></i> DocNet</a>
					</span>
				</div>	
			</div>
            &nbsp;
        </nav>
        <section data-toggle="nav-shift" class="nav-content-wrap">
            <nav class="nav-top" role="navigation" aria-label="top navigation">
                <i data-toggle="nav-top" class="fa fa-bars"></i>
                <a href="../index.htm">BenchmarkDotNet Documentation</a>
            </nav>
            <div class="nav-content">
                <div role="navigation" aria-label="breadcrumbs navigation">
                    <div class="breadcrumbs">
<ul><li><a href="../index.htm">Home</a></li> / <li><a href="../Advancedfeatures.htm">Advanced features</a></li> / <li><a href="../Advanced/Arguments.htm">Arguments</a></li></ul>
					
                    </div>
                    <hr />
                </div>
                <div role="main">
                    <div class="section">
<h1 id="arguments">Arguments<a class="headerlink" href="#arguments" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h1>
<p>As an alternative to using <code>[Params]</code>, you can specify arguments for your benchmarks. There are several ways to do it (described below). </p>
<p><strong>Important:</strong> InProcessToolchain does not support Arguments (yet!). See <a href="https://github.com/dotnet/BenchmarkDotNet/issues/687" target="_blank">#687</a> for more details.</p>
<h2 id="arguments-1">[Arguments]<a class="headerlink" href="#arguments-1" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>The [ArgumentsAttribute] allows you to provide a set of values. Every value must be a compile-time constant (it's C# lanugage limitation for attributes in general).
You can also combine <code>Arguments</code> with <code>Params</code>. As a result, you will get results for each combination of params values.</p>
<pre><code class="cs">public class IntroArguments
{
    [Params(true, false)] // Arguments can be combined with Params
    public bool AddExtra5Miliseconds;

    [Benchmark]
    [Arguments(100, 10)]
    [Arguments(100, 20)]
    [Arguments(200, 10)]
    [Arguments(200, 20)]
    public void Benchmark(int a, int b)
    {
        if (AddExtra5Miliseconds)
            Thread.Sleep(a + b + 5);
        else
            Thread.Sleep(a + b);
    }
}
</code></pre>

<table class="table table-bordered-all table-responsive">
<thead>
<tr>
	<th>Method</th>
	<th>AddExtra5Miliseconds</th>
	<th>a</th>
	<th>b</th>
	<th align="right">Mean</th>
	<th align="right">Error</th>
	<th align="right">StdDev</th>
</tr>
</thead>
<tbody>
<tr>
	<td>Benchmark</td>
	<td>False</td>
	<td>100</td>
	<td>10</td>
	<td align="right">110.1 ms</td>
	<td align="right">0.0056 ms</td>
	<td align="right">0.0044 ms</td>
</tr>
<tr>
	<td>Benchmark</td>
	<td>False</td>
	<td>100</td>
	<td>20</td>
	<td align="right">120.1 ms</td>
	<td align="right">0.0155 ms</td>
	<td align="right">0.0138 ms</td>
</tr>
<tr>
	<td>Benchmark</td>
	<td>False</td>
	<td>200</td>
	<td>10</td>
	<td align="right">210.2 ms</td>
	<td align="right">0.0187 ms</td>
	<td align="right">0.0175 ms</td>
</tr>
<tr>
	<td>Benchmark</td>
	<td>False</td>
	<td>200</td>
	<td>20</td>
	<td align="right">220.3 ms</td>
	<td align="right">0.1055 ms</td>
	<td align="right">0.0986 ms</td>
</tr>
<tr>
	<td>Benchmark</td>
	<td>True</td>
	<td>100</td>
	<td>10</td>
	<td align="right">115.3 ms</td>
	<td align="right">0.1375 ms</td>
	<td align="right">0.1286 ms</td>
</tr>
<tr>
	<td>Benchmark</td>
	<td>True</td>
	<td>100</td>
	<td>20</td>
	<td align="right">125.3 ms</td>
	<td align="right">0.1212 ms</td>
	<td align="right">0.1134 ms</td>
</tr>
<tr>
	<td>Benchmark</td>
	<td>True</td>
	<td>200</td>
	<td>10</td>
	<td align="right">215.4 ms</td>
	<td align="right">0.0779 ms</td>
	<td align="right">0.0691 ms</td>
</tr>
<tr>
	<td>Benchmark</td>
	<td>True</td>
	<td>200</td>
	<td>20</td>
	<td align="right">225.4 ms</td>
	<td align="right">0.0775 ms</td>
	<td align="right">0.0725 ms</td>
	<td></td>
</tr>
</tbody>
</table>
<h2 id="argumentssource">[ArgumentsSource]<a class="headerlink" href="#argumentssource" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>In case you want to use a lot of values, you should use <code>[ArgumentsSource]</code>.</p>
<p>You can mark one or several fields or properties in your class by the <code>ArgumentsSource</code> attribute. In this attribute, you have to specify the name of public method/property which is going to provide the values (something that implements <code>IEnumerable</code>). The source must be within benchmarked type! If the values are complex types (not compile-time constants) you should implement <code>IParam</code> interface. See <a href="Params.md#IParam">more</a>.</p>
<pre><code class="cs">public class IntroArgumentsSource
{
    [Benchmark]
    [ArgumentsSource(nameof(Numbers))]
    public double Pow(double x, double y) =&gt; Math.Pow(x, y);

    public IEnumerable&lt;object[]&gt; Numbers()
    {
        yield return new object[] { 1.0, 1.0 };
        yield return new object[] { 2.0, 2.0 };
        yield return new object[] { 4.0, 4.0 };
        yield return new object[] { 10.0, 10.0 };
    }
}
</code></pre>

<table class="table table-bordered-all table-responsive">
<thead>
<tr>
	<th>Method</th>
	<th>x</th>
	<th>y</th>
	<th align="right">Mean</th>
	<th align="right">Error</th>
	<th align="right">StdDev</th>
</tr>
</thead>
<tbody>
<tr>
	<td>Pow</td>
	<td>1</td>
	<td>1</td>
	<td align="right">9.360 ns</td>
	<td align="right">0.0190 ns</td>
	<td align="right">0.0149 ns</td>
</tr>
<tr>
	<td>Pow</td>
	<td>2</td>
	<td>2</td>
	<td align="right">40.624 ns</td>
	<td align="right">0.3413 ns</td>
	<td align="right">0.3192 ns</td>
</tr>
<tr>
	<td>Pow</td>
	<td>4</td>
	<td>4</td>
	<td align="right">40.537 ns</td>
	<td align="right">0.0560 ns</td>
	<td align="right">0.0524 ns</td>
</tr>
<tr>
	<td>Pow</td>
	<td>10</td>
	<td>10</td>
	<td align="right">40.395 ns</td>
	<td align="right">0.3274 ns</td>
	<td align="right">0.3063 ns</td>
</tr>
</tbody>
</table>
<h2 id="allocation-cost">Allocation cost<a class="headerlink" href="#allocation-cost" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>The cost of creating the arguments is not included in the benchmark. So if you want to pass an array as an argument, we are going to allocate it before running the benchmark, and the benchmark will not include this operation.</p>
<pre><code class="cs">[MemoryDiagnoser]
public class IntroArrayParam
{
    [Benchmark]
    [ArgumentsSource(nameof(Data))]
    public int ArrayIndexOf(int[] array, int value) =&gt; Array.IndexOf(array, value);

    [Benchmark]
    [ArgumentsSource(nameof(Data))]
    public int ManualIndexOf(int[] array, int value)
    {
        for (int i = 0; i &lt; array.Length; i++)
            if (array[i] == value)
                return i;

        return -1;
    }

    public IEnumerable&lt;object[]&gt; Data()
    {
        yield return new object[] { ArrayParam&lt;int&gt;.ForPrimitives(new[] { 1, 2, 3 }), 4 };
        yield return new object[] { ArrayParam&lt;int&gt;.ForPrimitives(Enumerable.Range(0, 100).ToArray()), 4 };
        yield return new object[] { ArrayParam&lt;int&gt;.ForPrimitives(Enumerable.Range(0, 100).ToArray()), 101 };
    }
}
</code></pre>

<table class="table table-bordered-all table-responsive">
<thead>
<tr>
	<th>Method</th>
	<th>array</th>
	<th>value</th>
	<th align="right">Mean</th>
	<th align="right">Error</th>
	<th align="right">StdDev</th>
	<th align="right">Allocated</th>
</tr>
</thead>
<tbody>
<tr>
	<td><strong>ArrayIndexOf</strong></td>
	<td><strong>Array[100]</strong></td>
	<td><strong>4</strong></td>
	<td align="right"><strong>15.558 ns</strong></td>
	<td align="right"><strong>0.0638 ns</strong></td>
	<td align="right"><strong>0.0597 ns</strong></td>
	<td align="right"><strong>0 B</strong></td>
</tr>
<tr>
	<td>ManualIndexOf</td>
	<td>Array[100]</td>
	<td>4</td>
	<td align="right">5.345 ns</td>
	<td align="right">0.0668 ns</td>
	<td align="right">0.0625 ns</td>
	<td align="right">0 B</td>
</tr>
<tr>
	<td><strong>ArrayIndexOf</strong></td>
	<td><strong>Array[3]</strong></td>
	<td><strong>4</strong></td>
	<td align="right"><strong>14.334 ns</strong></td>
	<td align="right"><strong>0.1758 ns</strong></td>
	<td align="right"><strong>0.1558 ns</strong></td>
	<td align="right"><strong>0 B</strong></td>
</tr>
<tr>
	<td>ManualIndexOf</td>
	<td>Array[3]</td>
	<td>4</td>
	<td align="right">2.758 ns</td>
	<td align="right">0.0905 ns</td>
	<td align="right">0.1208 ns</td>
	<td align="right">0 B</td>
</tr>
<tr>
	<td><strong>ArrayIndexOf</strong></td>
	<td><strong>Array[100]</strong></td>
	<td><strong>101</strong></td>
	<td align="right"><strong>78.359 ns</strong></td>
	<td align="right"><strong>1.8853 ns</strong></td>
	<td align="right"><strong>2.0955 ns</strong></td>
	<td align="right"><strong>0 B</strong></td>
</tr>
<tr>
	<td>ManualIndexOf</td>
	<td>Array[100]</td>
	<td>101</td>
	<td align="right">80.421 ns</td>
	<td align="right">0.6391 ns</td>
	<td align="right">0.5978 ns</td>
	<td align="right">0 B</td>
</tr>
</tbody>
</table>

                    </div>
                </div>
                <footer>
                    <hr />
                    <div role="contentinfo">
BenchmarkDotNet Documentation. &copy;2013-2018. <a href='https://github.com/dotnet/BenchmarkDotNet' target='_blank'>GitHub</a> | <a href='https://www.nuget.org/packages/BenchmarkDotNet/' target='_blank'>NuGet</a>.
                    </div>
                </footer>
            </div>
        </section>
    </div>
    <script src="../js/jquery-2.1.1.min.js"></script>
    <script src="../js/modernizr-2.8.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script src="../js/theme.js"></script>

</body>
</html>
